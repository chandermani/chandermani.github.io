---
layout: post
title: AngularJS  Model - ViewModel
date: '2013-08-06T17:27:00.002+05:30'
author: Chandermani Arora
tags:
- javascript
- angularjs
- angular
modified_time: '2013-08-06T17:32:18.061+05:30'
blogger_id: tag:blogger.com,1999:blog-20117988.post-4601300808849264483
blogger_orig_url: http://chandermani.blogspot.com/2013/08/angularjs-model-viewmodel.html
---

<div dir="ltr" style="text-align: left;" trbidi="on">Recently Robin Ward did a <a href="http://eviltrout.com/2013/06/15/ember-vs-angular.html" target="_blank">comparison</a> between AngularJS and Ember (both the post and the comments are interesting read). One of the complaint that Robin had that AngularJS does not provide any specialized model class. As described in the blog<br /><blockquote class="tr_bq"><br />There is no standard <code>Model</code> base class, nor is there a component or interface in AngularJS that defines what a model is supposed to be.</blockquote><br />What that means is that anything defined on $scope can acts as model, as this sample on the blog describes<br /><br /><script src="https://gist.github.com/chandermani/6000081.js"></script><br /><br /><br />For some (like me) this is the flexibility where as for others who want a more structural approach this is a <span class="hw">nuisance.AngularJS does not even provide any definite guidelines around how the model should be actually designed to be effective with AngularJS</span><br /><br /><span class="hw">This leads to what we call as $scope pollution.  We define multitude of properties on the $scope object and managing it becomes difficult.&nbsp; Looking at the code one cannot tell what is the actual model and what properties are just to support UI logic.</span><br /><br /><h4 style="text-align: left;"><span class="hw">Model Design - Convention </span></h4><span class="hw">We have been using AngularJS for some time now and we have devised a convention which&nbsp; has helped us to keep $scope pollution under control. Here is how we organize our model.</span><br /><ul><li><span class="hw">On the Controller scope we create a object viewModel. ViewModel according to us is a model which has been tailored to support a specific UI, helping in easing data binding.</span></li><li><span class="hw">We define a property model on either the controller scope or on the viewModel defined above. This model is something that is loaded from the server and updated back on edits.</span></li></ul><span class="hw">This is how a sample controller looks&nbsp;</span><br /><span class="hw"><br /></span><span class="hw"><script src="https://gist.github.com/chandermani/6c1591e3c93200aca058.js"></script></span><br /><span class="hw">So any controller defines only one or two property directly on the $scope and that's it !</span><br /><span class="hw"><br /></span><span class="hw">What could be the advantage of this small convention? Many :)</span><span class="hw"><br /></span><br /><br /><h4 style="text-align: left;"><span class="hw">Readability </span></h4><span class="hw">To start with, anyone reading the code can know what the model is and what variable are just used to support AngularJS data binding (such variables are created on viewModel object).</span><br /><br /><h4 style="text-align: left;">Ease of passing model around </h4>Any decent size angular app/page would consist of multiple partial views and directives working together to provide the necessary functionality. One of the challenge in such setup is how to keep partial views and directives as independent as possible.<br /><br />For partial views (views loaded using ng-include) here is how we define our template and main view.<br /><br /><script src="https://gist.github.com/chandermani/6163744.js"></script><br /><br />As you can see, any template that requires a model to work on, gets it through ng-init. Just looking at the ng-init assignment one can determine what does a partial template require. Passing model around to these sub views become easier. Each of these partials can have their own controller and create their own viewModel object.<br /><br />For directive, this is what we can do<br /><br /><script src="https://gist.github.com/chandermani/6163807.js"></script><br /><br />For directives it becomes easier for us to create isolated scope, which has great benefits in terms of re-usability.<br /><br />As you can see in both cases dependencies are clearly defined and there is a single root object at all levels. </div>
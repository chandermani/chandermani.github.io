---
layout: post
title: Contrasting Azure and IronFoundry Deployment Behaviour
date: '2012-03-06T11:59:00.000+05:30'
author: Chandermani Arora
tags:
- PaaS
- IronFoundry
- Azure
- Iron Foundry
- Cloud Computing
- Cloud Foundry
modified_time: '2012-03-06T11:59:40.167+05:30'
blogger_id: tag:blogger.com,1999:blog-20117988.post-1683187405665267610
blogger_orig_url: http://chandermani.blogspot.com/2012/03/contrasting-azure-and-ironfoundry.html
---

<div dir="ltr" style="text-align: left;" trbidi="on">I have been exploring <a href="http://ironfoundry.org/" target="_blank">Iron Foundry</a> a PaaS player in .Net space for the last few weeks. One of the things I liked about Iron Foundry was, how fast deployments happened. One of the reasons for this is how binary\file package gets uploaded to the cloud infrastructure. The Iron Foundry \ <a href="http://cloudfoundry.org/" target="_blank">Cloud Foundry </a>approach (since Iron Foundry is port of CF) of only uploading change-set instead of complete binary\file package makes this step of deployment quite fast.<br /><br />What happens in Azure is <br /><ul style="text-align: left;"><li>You create a package file (cspkg) using either Visual Studio (VS) or command line tool cspack</li><li>The generated package file contains the complete set of binaries and other resources such as images, css, javasripts etc&nbsp;</li><li>This package is then uploaded to Azure infrastructure and then deployed by the Fabric Controller.</li></ul><br />In contrast the process that Cloud Foundry follows to decide what it should send to cloud follows a multi-stage process. When an application is ready to be pushed to Cloud Foundry the client and Cloud Foundry servers perform a number of steps to make sure only the required amount of binaries\files are uploaded. These steps include<br /><ul style="text-align: left;"><li>Creating a metadata file.This metadata file contains Application Name, Url, Framework, Runtime, Instance Required, Memory reservation (this is similar to Azure configuration files cscfg)</li></ul><ul style="text-align: left;"><li>Look at components (Decide what gems, libraries, npms, etc. are used in preparation for the next step.)</li><li>File based Fingerprinting (This is where a Manifest of files is built along with a SHA-1 hash associated with that file).</li><li>Send manifest to Cloud Foundry</li><li>The Cloud Foundry then responds with a manifest. This manifest lists only the files that Cloud Foundry needs, not all of the files that make up the application.</li><li>The client based on the manifest response creates a packages (compressed) which contains only the files that have changes.</li><li>The client then uploads the package&nbsp; </li></ul><br />If you compare the process above the optimization that Cloud Foundry does as compared to Azure reduces the deployment time considerably.<br /><br />With Azure I have time and again faced issues where we miss some file\code fixed and that required us to upload the complete package again. Imagine doing it for package of 200MB+ size on a slow network. <br /><br />Windows Azure has improved this process a bit by supporting <a href="https://www.iis.net/download/webdeploy" target="_blank">Web Deploy</a>. This allows us to do incremental\differential upgrades as supported by Web Deploy model. But this approach again has it's own set of limitations as detailed <a href="http://msdn.microsoft.com/en-us/library/windowsazure/ff683672.aspx" target="_blank">here.</a><br /><br />This posts only talks about the packaging and upload process for Azure and Cloud Foundry. If you want to know more about how Cloud Foundry deployment works look at these posts<br /><br /><ul style="text-align: left;"><li>The client Part: <a href="http://blog.cloudfoundry.com/post/4737632136/what-happens-when-you-vmc-push-an-application-to-cloud-foundry">http://blog.cloudfoundry.com/post/4737632136/what-happens-when-you-vmc-push-an-application-to-cloud-foundry</a></li><li>The server part: <a href="http://blog.cloudfoundry.com/post/5223861703/how-cloud-foundry-works-when-a-new-application-is-deployed">http://blog.cloudfoundry.com/post/5223861703/how-cloud-foundry-works-when-a-new-application-is-deployed</a></li></ul><br />All in all Azure can still improve this part of their deployment process to reap good performance benefits and improve development experience. <br /><br /></div>